<VirtualHost *:80>
    ServerName gnctest.thbcolombia.com
    ServerAlias www.gnctest.thbcolombia.com
    ServerAdmin ariel.calzada@gmail.com
    ServerSignature Off

    # Logs
    CustomLog /var/log/apache2/gnctest-access.log combined
    ErrorLog /var/log/apache2/gnctest-error.log
    LogLevel warn

    <Location "/gnctest_static">
        Options -Indexes
        Require all granted
    </Location>
    Alias /gnctest_static /opt/deployments/gnctest/static_root

    <Location "/gnctest_media">
        Options -Indexes
        Require all granted
    </Location>
    Alias /gnctest_media /opt/deployments/gnctest/media

    <Directory /opt/deployments/gnctest/conf>
        <Files wsgi.py>
            Require all granted
        </Files>
    </Directory>

    Alias /robots.txt /opt/deployments/gnctest/static_root/base/robots/robots.txt
    Alias /favicon.ico /opt/deployments/gnctest/static_root/base/favicon/favicon.ico

    WSGIDaemonProcess gnctest_process python-path=/opt/deployments/gnctest:/opt/venv/gnctest/lib/python2.7/site-packages
    WSGIProcessGroup gnctest_process
    WSGIScriptAlias / /opt/deployments/gnctest/conf/wsgi.py process-group=gnctest_process

    # Redirect non-www to www
    RewriteEngine on
    RewriteCond %{HTTP_HOST} !^www\.gnctest\.thbcolombia\.com(:80)?$
    RewriteRule ^/(.*) http://www\.gnctest\.thbcolombia\.com/$1 [L,R=301]
</VirtualHost>